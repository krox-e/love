<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Motivos Para Casar Com Voc√™!</title>
    <!-- Carrega o Tailwind CSS para estiliza√ß√£o --><script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&family=Parisienne&display=swap" rel="stylesheet">
    <style>
        /* Define as fontes padr√£o e uma fonte script para t√≠tulos especiais */
        body {
            font-family: 'Inter', sans-serif;
            background-color: #fce7f3; /* Rosa beb√™ suave */
            /* Fundo com padr√£o de cora√ß√µes */
            background-image: url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='%23f9dbe6' fill-opacity='0.5' fill-rule='evenodd'%3E%3Cpath d='M0 60V0h60v60h-4V0H4v60H0zm0-4V0h4v56H0zm56 0V0h4v56h-4zM24 8h2v2h-2zm-6 0h2v2h-2zm-6 0h2v2h-2zM42 8h2v2h-2zm-6 0h2v2h-2zm-6 0h2v2h-2zm-6 0h2v2h-2zM0 8h2v2H0zm0-4h2v2H0zm0-4h2v2H0zm0-4h2v2H0zm4-4h2v2H4zm4-4h2v2H8zm4-4h2v2H12zM0 60h2v2H0zm0-4h2v2H0zm0-4h2v2H0zm0-4h2v2H0zm4-4h2v2H4zm4-4h2v2H8zm4-4h2v2H12zM60 60h2v2H60zm-4 0h2v2h-4zm-4 0h2v2h-4zM60 0h2v2H60zm-4 0h2v2h-4zm-4 0h2v2h-4zM24 56h2v2h-2zm-6 0h2v2h-2zm-6 0h2v2h-2zm-6 0h2v2h-2zM42 56h2v2h-2zm-6 0h2v2h-2zm-6 0h2v2h-2zm-6 0h2v2h-2z'/%3E%3Cpath d='M44.664 26.664L32 14 19.336 26.664 32 39.336z'/%3E%3Ccircle cx='32' cy='32' r='2' fill='%23f9dbe6'/%3E%3Cpath d='M32 12c-3.134 0-5.748 1.587-7.23 4.09l-2.433-2.433C24.08 10.354 27.97 8 32 8c4.03 0 7.92 2.354 11.663 5.657l-2.433 2.433C37.748 13.587 35.134 12 32 12z'/%3E%3Cpath d='M46 29c-3.134 0-5.748 1.587-7.23 4.09l-2.433-2.433C40.08 27.354 43.97 25 48 25c4.03 0 7.92 2.354 11.663 5.657l-2.433 2.433C51.748 30.587 49.134 29 46 29z'/%3E%3Cpath d='M18 29c-3.134 0-5.748 1.587-7.23 4.09l-2.433-2.433C12.08 27.354 15.97 25 20 25c4.03 0 7.92 2.354 11.663 5.657l-2.433 2.433C25.748 30.587 23.134 29 20 29z'/%3E%3Cpath d='M32 46c-3.134 0-5.748 1.587-7.23 4.09l-2.433-2.433C24.08 44.354 27.97 42 32 42c4.03 0 7.92 2.354 11.663 5.657l-2.433 2.433C37.748 47.587 35.134 46 32 46z'/%3E%3C/g%3E%3C/svg%3E");
        }
        .card {
            box-shadow: 0 10px 30px rgba(255, 105, 180, 0.4); /* Sombra rosa mais evidente */
            background-color: #fff;
            border: 1px solid #ffccd8; /* Borda sutil */
        }
        .text-pink-600 { /* T√≠tulo principal */
            color: #d82c6a; /* Um rosa mais vibrante */
        }
        .btn-primary {
            transition: all 0.2s ease;
            background-color: #f06292; /* Rosa m√©dio mais rom√¢ntico */
            font-family: 'Parisienne', cursive; /* Fonte especial para o bot√£o principal */
            font-size: 1.5rem; /* Aumentar um pouco para a fonte script */
        }
        .btn-primary:hover {
            background-color: #e91e63; /* Rosa mais escuro no hover */
            transform: translateY(-2px) scale(1.02); /* Pequena anima√ß√£o no hover */
            box-shadow: 0 8px 15px rgba(233, 30, 99, 0.3);
        }
        .list-reason {
            border-left: 4px solid #ff80ab; /* Detalhe lateral rosa chiclete */
            background-color: #fffafc; /* Fundo suave para os itens */
            transition: all 0.3s ease;
        }
        .list-reason:hover {
            background-color: #fff5f8; /* Fundo levemente mais claro no hover */
            transform: translateX(3px); /* Pequeno movimento */
        }
        /* Ajuste para o texto dentro do input */
        .p-3::placeholder {
            color: #f48fb1; /* Cor rosa para o placeholder */
            opacity: 0.8;
        }
        /* Estilos para o modal de proposta final */
        .modal-content {
            background: linear-gradient(135deg, #fff0f5 0%, #ffe4e6 100%); /* Gradiente suave */
            border: 2px solid #ffccd8;
            animation: fadeIn 0.5s ease-out;
        }
        .modal-title-font { /* Para o t√≠tulo da proposta final */
            font-family: 'Parisienne', cursive;
            color: #e91e63;
            text-shadow: 1px 1px 3px rgba(0,0,0,0.1);
        }
        .modal-subtitle-font {
            font-family: 'Inter', sans-serif;
            font-weight: 600;
        }
        .final-proposal-message { /* Mensagem principal da proposta */
            font-family: 'Parisienne', cursive;
            color: #d82c6a;
            font-size: 2.8rem; /* Um pouco menor, mas ainda grande */
            line-height: 1.2;
            text-shadow: 1px 1px 4px rgba(233, 30, 99, 0.2);
            animation: pulseText 2s infinite;
        }
        @keyframes pulseText {
            0% { transform: scale(1); opacity: 1; }
            50% { transform: scale(1.03); opacity: 0.95; }
            100% { transform: scale(1); opacity: 1; }
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: scale(0.95); }
            to { opacity: 1; transform: scale(1); }
        }
    </style>
</head>
<body class="min-h-screen flex items-center justify-center p-4">

    <div id="appContainer" class="w-full max-w-lg card p-6 md:p-8 rounded-2xl">
        <h1 class="text-3xl font-extrabold text-center text-pink-600 mb-6">
            <span class="modal-title-font text-5xl">Meu Cora√ß√£o Te Convida!</span> üíñ
        </h1>

        <!-- 1. Nome do Destinat√°rio --><div class="mb-6">
            <label for="partnerNameInput" class="block text-sm font-semibold text-gray-700 mb-2">
                Para quem √© todo esse amor?
            </label>
            <input type="text" id="partnerNameInput" placeholder="Nome da sua paix√£o..."
                   class="w-full p-3 border border-pink-300 rounded-lg focus:ring-pink-500 focus:border-pink-500 transition duration-150"
                   value="" oninput="updateProposalName()">
        </div>

        <!-- 2. Adicionar Motivo --><div class="mb-6 space-y-3">
            <label for="reasonInput" class="block text-sm font-semibold text-gray-700">
                Qual o motivo para viverem um "felizes para sempre"?
            </label>
            <div class="flex space-x-2">
                <input type="text" id="reasonInput" placeholder="Ex: Seu sorriso ilumina meus dias."
                       class="flex-grow p-3 border border-pink-300 rounded-lg focus:ring-pink-500 focus:border-pink-500 transition duration-150">
                <button id="addReasonBtn" class="btn-primary text-white font-bold py-3 px-4 rounded-lg shadow-md hover:shadow-lg focus:outline-none focus:ring-4 focus:ring-pink-300">
                    <span class="font-inter">Adicionar</span>
                </button>
            </div>
            <p id="errorMsg" class="text-red-500 text-sm italic hidden">Ah, esqueceu de escrever o motivo! Digite algo especial. ü•∞</p>
        </div>

        <!-- 3. Lista de Motivos (Display) --><div class="mb-8">
            <h2 class="text-xl font-bold text-pink-700 mb-3 border-b pb-1">
                Suas raz√µes do cora√ß√£o (<span id="reasonsCount">0</span>):
            </h2>
            <div id="reasonsList" class="space-y-3 max-h-64 overflow-y-auto pr-2">
                <!-- Motivos ser√£o inseridos aqui pelo JavaScript --><p id="emptyListMsg" class="text-gray-500 italic text-sm">Nenhum motivo ainda. Comece a encher de amor! üíñ</p>
            </div>
        </div>

        <!-- 4. Bot√£o Final de Proposta --><button id="prepareProposalBtn" disabled
                class="w-full btn-primary text-white font-extrabold text-lg py-4 rounded-xl shadow-lg hover:shadow-xl disabled:bg-pink-300 disabled:cursor-not-allowed focus:outline-none focus:ring-4 focus:ring-pink-300">
            <span class="font-inter">Gerar Proposta de Casamento!</span> ‚ù§Ô∏è
        </button>

    </div>

    <!-- Modal da Proposta Final --><div id="proposalModal" class="fixed inset-0 bg-gray-900 bg-opacity-70 hidden items-center justify-center p-4 z-50">
        <div class="modal-content w-full max-w-2xl p-8 rounded-2xl shadow-2xl relative">
            <button id="closeModalBtn" class="absolute top-4 right-4 text-gray-500 hover:text-gray-900 transition duration-150">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
                </svg>
            </button>
            <div id="finalProposalContent" class="text-center">
                <!-- Conte√∫do final da proposta ser√° inserido aqui --></div>
            <div class="mt-8 flex justify-center">
                <button onclick="copyProposalText()" class="bg-pink-500 text-white font-bold py-3 px-6 rounded-lg hover:bg-pink-600 transition duration-150 mr-4">
                    Copiar Texto
                </button>
                <button onclick="shareProposal()" class="bg-indigo-500 text-white font-bold py-3 px-6 rounded-lg hover:bg-indigo-600 transition duration-150">
                    Compartilhar
                </button>
            </div>
        </div>
    </div>

    <script>
        // Array para armazenar os motivos
        let reasons = [];
        let partnerName = "";

        // Chaves de localStorage para persist√™ncia
        const STORAGE_REASONS_KEY = 'marriageReasons';
        const STORAGE_NAME_KEY = 'partnerName';

        // Refer√™ncias aos elementos do DOM
        const partnerNameInput = document.getElementById('partnerNameInput');
        const reasonInput = document.getElementById('reasonInput');
        const addReasonBtn = document.getElementById('addReasonBtn');
        const reasonsList = document.getElementById('reasonsList');
        const prepareProposalBtn = document.getElementById('prepareProposalBtn');
        const proposalModal = document.getElementById('proposalModal');
        const finalProposalContent = document.getElementById('finalProposalContent');
        const closeModalBtn = document.getElementById('closeModalBtn');
        const reasonsCount = document.getElementById('reasonsCount');
        const emptyListMsg = document.getElementById('emptyListMsg');
        const errorMsg = document.getElementById('errorMsg');

        // --- Fun√ß√µes de Persist√™ncia (localStorage) ---

        // Fun√ß√£o para salvar dados no localStorage
        function saveData() {
            try {
                localStorage.setItem(STORAGE_NAME_KEY, partnerNameInput.value.trim());
                // Salvamos o array de motivos como uma string JSON
                localStorage.setItem(STORAGE_REASONS_KEY, JSON.stringify(reasons));
            } catch (e) {
                console.error("Erro ao salvar dados no localStorage:", e);
                // Pode ocorrer se o navegador estiver em modo privado ou com armazenamento cheio
            }
        }

        // Fun√ß√£o para carregar dados do localStorage
        function loadData() {
            try {
                const storedName = localStorage.getItem(STORAGE_NAME_KEY);
                const storedReasons = localStorage.getItem(STORAGE_REASONS_KEY);

                if (storedName) {
                    partnerNameInput.value = storedName;
                    partnerName = storedName;
                }

                if (storedReasons) {
                    // Convertemos a string JSON de volta para um array
                    reasons = JSON.parse(storedReasons);
                }
            } catch (e) {
                console.error("Erro ao carregar dados do localStorage:", e);
                reasons = []; // Reseta se houver erro de parsing
            }
        }

        // --- Fun√ß√µes de L√≥gica da Aplica√ß√£o ---

        // Fun√ß√£o para atualizar o nome no t√≠tulo do bot√£o
        function updateProposalName() {
            partnerName = partnerNameInput.value.trim();
            const baseText = "Gerar Proposta de Casamento!";
            if (partnerName) {
                prepareProposalBtn.innerHTML = `<span class="font-inter">Gerar Proposta para ${partnerName}!</span> ‚ù§Ô∏è`;
            } else {
                prepareProposalBtn.innerHTML = `<span class="font-inter">${baseText}</span> ‚ù§Ô∏è`;
            }
            checkButtonState();
            saveData(); // Salva o nome
        }

        // Fun√ß√£o para verificar se o bot√£o de gerar proposta deve estar ativo
        function checkButtonState() {
            if (reasons.length > 0 && partnerNameInput.value.trim()) {
                prepareProposalBtn.disabled = false;
            } else {
                prepareProposalBtn.disabled = true;
            }
        }

        // Fun√ß√£o para adicionar um motivo √† lista
        function addReason() {
            const reasonText = reasonInput.value.trim();
            if (reasonText) {
                reasons.push(reasonText);
                reasonInput.value = ''; // Limpa o input
                errorMsg.classList.add('hidden'); // Esconde a mensagem de erro
                renderReasons(); // Atualiza a lista no DOM
                saveData(); // Salva a nova lista
            } else {
                errorMsg.classList.remove('hidden'); // Mostra a mensagem de erro
            }
        }

        // Fun√ß√£o para remover um motivo
        function removeReason(index) {
            reasons.splice(index, 1);
            renderReasons(); // Atualiza a lista no DOM
            saveData(); // Salva a lista atualizada
        }

        // Fun√ß√£o para renderizar a lista de motivos no DOM
        function renderReasons() {
            reasonsList.innerHTML = ''; // Limpa o conte√∫do atual

            if (reasons.length === 0) {
                emptyListMsg.classList.remove('hidden');
            } else {
                emptyListMsg.classList.add('hidden');
                reasons.forEach((reason, index) => {
                    const li = document.createElement('div');
                    li.className = 'list-reason flex items-center justify-between p-3 rounded-lg bg-white shadow-sm';
                    li.innerHTML = `
                        <span class="text-gray-800 text-sm flex-1 mr-4">${index + 1}. ${reason}</span>
                        <button onclick="removeReason(${index})" class="text-red-500 hover:text-red-700 focus:outline-none transition duration-150" aria-label="Remover motivo">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16" />
                            </svg>
                        </button>
                    `;
                    reasonsList.appendChild(li);
                });
            }

            reasonsCount.textContent = reasons.length;
            checkButtonState();
        }

        // Fun√ß√£o para gerar e exibir a proposta final
        function generateProposal() {
            if (reasons.length === 0 || !partnerName) {
                return; // N√£o faz nada se a lista estiver vazia ou o nome estiver em branco
            }

            // Gera o conte√∫do HTML da proposta
            let reasonsHtml = reasons.map((reason, index) => `
                <li class="text-lg mb-3 leading-relaxed text-gray-700">
                    <span class="font-bold text-pink-600 mr-2">${index + 1}.</span> ${reason}
                </li>
            `).join('');

            const finalHtml = `
                <div class="text-center p-4">
                    <h2 class="text-4xl font-extrabold mb-4 modal-title-font">
                        Para o meu amor, ${partnerName}!
                    </h2>
                    <p class="text-2xl font-medium text-gray-800 mb-6 modal-subtitle-font">
                        Com todo o meu cora√ß√£o, listei alguns dos infinitos motivos pelos quais quero passar a vida inteira ao seu lado:
                    </p>
                    <div class="text-left max-w-md mx-auto my-6 p-6 bg-pink-50 rounded-xl border border-pink-200">
                        <ol class="list-none p-0 m-0">
                            ${reasonsHtml}
                        </ol>
                    </div>
                    <p class="final-proposal-message mt-8 mb-6">
                        Voc√™ aceita se casar comigo e tornar cada dia um "sim"?
                    </p>
                    <p class="text-sm text-gray-500 italic">
                        (Este site √© s√≥ uma brincadeira, mas a proposta... ah, a proposta √© a mais pura verdade do meu cora√ß√£o! ‚ù§Ô∏è)
                    </p>
                </div>
            `;

            finalProposalContent.innerHTML = finalHtml;
            proposalModal.classList.remove('hidden');
            proposalModal.classList.add('flex'); // Mostra o modal
        }

        // Fun√ß√£o para fechar o modal
        function closeModal() {
            proposalModal.classList.add('hidden');
            proposalModal.classList.remove('flex');
        }

        // Fun√ß√£o para copiar o texto da proposta (apenas o texto limpo)
        function copyProposalText() {
            const partner = partnerName.toUpperCase();
            let textToCopy = `PARA VOC√ä, ${partner}!\n\nCom todo o meu cora√ß√£o, listei alguns dos infinitos motivos pelos quais quero passar a vida inteira ao seu lado:\n\n`;

            reasons.forEach((reason, index) => {
                textToCopy += `${index + 1}. ${reason}\n`;
            });

            textToCopy += `\nVoc√™ aceita se casar comigo e tornar cada dia um "sim"?\n\n(Esta √© a sua lista especial de motivos!)`;

            // Usa o m√©todo antigo (mais compat√≠vel em iframes)
            const textArea = document.createElement("textarea");
            textArea.value = textToCopy;
            document.body.appendChild(textArea);
            textArea.select();
            
            try {
                document.execCommand('copy');
                // Substituir o alerta por uma mensagem na tela (toast)
                showToast("Texto da proposta copiado para a √°rea de transfer√™ncia!");
            } catch (err) {
                console.error('Falha ao copiar:', err);
                showToast("Erro ao copiar o texto. Tente manualmente.");
            }
            document.body.removeChild(textArea);
        }

        // Fun√ß√£o para simular o compartilhamento (abre o texto em uma nova aba para facilitar a c√≥pia em mobile)
        function shareProposal() {
            const partner = partnerName.toUpperCase();
            let textToShare = `PARA VOC√ä, ${partner}!\n\nCom todo o meu cora√ß√£o, listei alguns dos infinitos motivos pelos quais quero passar a vida inteira ao seu lado:\n\n`;

            reasons.forEach((reason, index) => {
                textToShare += `${index + 1}. ${reason}\n`;
            });

            textToShare += `\nVoc√™ aceita se casar comigo e tornar cada dia um "sim"? ‚ù§Ô∏è`;

            const shareUrl = 'data:text/plain;charset=utf-8,' + encodeURIComponent(textToShare);
            window.open(shareUrl, '_blank');
        }

        // Simula√ß√£o de um Toast/Mensagem
        function showToast(message) {
            let toast = document.getElementById('toast-message');
            if (!toast) {
                toast = document.createElement('div');
                toast.id = 'toast-message';
                toast.className = 'fixed bottom-5 left-1/2 transform -translate-x-1/2 bg-gray-800 text-white px-6 py-3 rounded-xl shadow-lg transition-opacity duration-300 opacity-0 z-50';
                document.body.appendChild(toast);
            }
            
            toast.textContent = message;
            toast.classList.remove('opacity-0');
            toast.classList.add('opacity-100');

            setTimeout(() => {
                toast.classList.remove('opacity-100');
                toast.classList.add('opacity-0');
            }, 3000);
        }

        // Adiciona os event listeners
        addReasonBtn.addEventListener('click', addReason);
        prepareProposalBtn.addEventListener('click', generateProposal);
        closeModalBtn.addEventListener('click', closeModal);

        // Permite adicionar motivo pressionando Enter no campo de motivo
        reasonInput.addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                addReason();
            }
        });

        // Atualiza o nome ao carregar e a cada input
        window.onload = () => {
            loadData(); // Agora carrega os dados salvos primeiro
            updateProposalName();
            renderReasons(); // Renderiza a lista carregada
        };
    </script>
</body>
</html>
